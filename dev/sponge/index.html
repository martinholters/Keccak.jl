<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Sponge operations · Keccak.jl</title><meta name="title" content="Sponge operations · Keccak.jl"/><meta property="og:title" content="Sponge operations · Keccak.jl"/><meta property="twitter:title" content="Sponge operations · Keccak.jl"/><meta name="description" content="Documentation for Keccak.jl."/><meta property="og:description" content="Documentation for Keccak.jl."/><meta property="twitter:description" content="Documentation for Keccak.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">Keccak.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">User Guide</span><ul><li><a class="tocitem" href="../fips-202/">SHA-3 (and SHAKE)</a></li><li class="is-active"><a class="tocitem" href>Sponge operations</a><ul class="internal"><li><a class="tocitem" href="#SIMD"><span>SIMD</span></a></li></ul></li><li><a class="tocitem" href="../sp800-185/">SHA-3 Derived Functions</a></li><li><a class="tocitem" href="../keccak/">Keccak-based sponge construction</a></li></ul></li><li><a class="tocitem" href="../reference/">Reference</a></li><li><a class="tocitem" href="../internals/">Internals</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">User Guide</a></li><li class="is-active"><a href>Sponge operations</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Sponge operations</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/martinholters/Keccak.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/martinholters/Keccak.jl/blob/main/docs/src/sponge.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Sponge-operations"><a class="docs-heading-anchor" href="#Sponge-operations">Sponge operations</a><a id="Sponge-operations-1"></a><a class="docs-heading-anchor-permalink" href="#Sponge-operations" title="Permalink"></a></h1><p>The Keccak algorithm family uses a cryptographic sponge construction. A sponge in this context is a block of data, divided in two parts of size &quot;rate&quot; and &quot;capacity&quot;, respectively, combined with a transformation function and a padding rule. A sponge can &quot;absorb&quot; input data and output data can be &quot;squeezed&quot; from it. The operations may not be mixed, however. The squeezing phase has to follow the absorption phase, with no further absorbing after the first squeeze.</p><p>Both absorption and squeezing are specified in terms of rate-sized blocks. When absorbing a block, it is XORed with the rate part of the sponge data and the transformation function is invoked on the whole sponge data. The padding rule specifies how to cope with input data with a length not divisible by the sponge rate. Squeezing a block is done by reading the rate part from the sponge data and invoking the transformation function on the whole sponge data.</p><p>To ease the use, the functions <a href="../reference/#Keccak.absorb"><code>absorb</code></a> and <a href="../reference/#Keccak.squeeze"><code>squeeze</code></a> allow arbitrary data sizes. The proper mapping to rate-sized blocks is handled internally. Furthermore, padding is not performed by actually modifying the input data; rather, the <a href="../reference/#Keccak.pad"><code>pad</code></a> function is invoked on the sponge and immediately absorbs the padding data.</p><p>When using the sponge functions, it is important to note that the sponges in Keccak.jl are immutable. Hence, the sponges are not modified in-place. Instead, updated sponges are returned. Thus, computing the 256bit SHA-3 with partitioning both input and output in two blocks each could look like this:</p><pre><code class="language-julia-repl hljs">julia&gt; sponge = sha3_256_sponge();

julia&gt; sponge = absorb(sponge, 0x00:0x04); # absorb first data chunk

julia&gt; sponge = absorb(sponge, 0x05:0x09); # absorb another data chunk

julia&gt; sponge = pad(sponge); # absorb appropriate padding

julia&gt; sponge, out1 = squeeze(sponge, Val(16)); # first part of output

julia&gt; sponge, out2 = squeeze(sponge, Val(16)); # second part of output

julia&gt; (out1..., out2...)
(0x60, 0x5a, 0x05, 0x14, 0x05, 0x91, 0x92, 0xe2, 0x6d, 0xbf, 0x06, 0xcf, 0xab, 0x86, 0xf3, 0xe9, 0xbb, 0xb9, 0xa6, 0x93, 0x63, 0xd4, 0xbe, 0x92, 0x5b, 0x22, 0x46, 0xdc, 0xd8, 0x65, 0x9a, 0x95)

julia&gt; sha3_256(0x00:0x09) # same result
(0x60, 0x5a, 0x05, 0x14, 0x05, 0x91, 0x92, 0xe2, 0x6d, 0xbf, 0x06, 0xcf, 0xab, 0x86, 0xf3, 0xe9, 0xbb, 0xb9, 0xa6, 0x93, 0x63, 0xd4, 0xbe, 0x92, 0x5b, 0x22, 0x46, 0xdc, 0xd8, 0x65, 0x9a, 0x95)</code></pre><p>The data provided to <a href="../reference/#Keccak.absorb"><code>absorb</code></a> can be an <code>AbstractVector{UInt8}</code> or a <code>Tuple{Vararg{UInt8}}</code>, or a <code>String</code> of which its <code>codeunits</code> will be used. If the length given to <a href="../reference/#Keccak.squeeze"><code>squeeze</code></a> is a <code>Val</code> (as in the example above), the return value will be a <code>Tuple</code>, if given as a plain integer, it will be a <code>Vector{UInt8}</code>.</p><div class="admonition is-warning" id="Warning-93a501a0e1838286"><header class="admonition-header">Warning<a class="admonition-anchor" href="#Warning-93a501a0e1838286" title="Permalink"></a></header><div class="admonition-body"><p>Conceptually, a sponge is either in the absorption phase or the squeezing phase. In the absorption phase, only <code>absorb</code> or <code>pad</code> may be invoked, where the latter transitions the sponge to the squeezing phase. In the squeezing phase, only <code>squeeze</code> may be called. Thus, the only permissible order of operations on a fresh sponge is:</p><ol><li>Process the input data with zero or more calls to <a href="../reference/#Keccak.absorb"><code>absorb</code></a>.</li><li>Call <a href="../reference/#Keccak.pad"><code>pad</code></a> <em>exactly</em> once.</li><li>Produce the output by zero or more calls to <a href="../reference/#Keccak.squeeze"><code>squeeze</code></a>.</li></ol><p>Violating this sequence is (at present) technically possible, but the results are unspecified.</p></div></div><h2 id="SIMD"><a class="docs-heading-anchor" href="#SIMD">SIMD</a><a id="SIMD-1"></a><a class="docs-heading-anchor-permalink" href="#SIMD" title="Permalink"></a></h2><p>The sponge operations support SIMD processing if the sponge state is stored as <code>SIMD.Vec</code>s. Such SIMD-capable sponges can be created with <a href="../reference/#Keccak.sha3_224_sponge"><code>sha3_224_sponge(::Val)</code></a>, <a href="../reference/#Keccak.sha3_256_sponge"><code>sha3_256_sponge(::Val)</code></a>, <a href="../reference/#Keccak.sha3_384_sponge"><code>sha3_384_sponge(::Val)</code></a>, <a href="../reference/#Keccak.sha3_512_sponge"><code>sha3_512_sponge(::Val)</code></a>, <a href="../reference/#Keccak.shake_128_sponge"><code>shake_128_sponge(::Val)</code></a>, or <a href="../reference/#Keccak.shake_256_sponge"><code>shake_256_sponge(::Val)</code></a>, where the <code>Val</code>-parameter specifies the desired level of SIMD-parallelism. Given a sponge for N-fold parallelism, the sponge operations work as follows:</p><ul><li><a href="../reference/#Keccak.absorb"><code>absorb</code></a> with a single data argument absorbs the same data into all N parallel sponges.</li><li><a href="../reference/#Keccak.absorb"><code>absorb</code></a> with N data arguments absorbs these into the respective parallel sponges. All data arguments have to be of the same length.</li><li><a href="../reference/#Keccak.pad"><code>pad</code></a> pads all N parallel sponges.</li><li><a href="../reference/#Keccak.squeeze"><code>squeeze</code></a> returns an N-tuple of the data squeezed from the respective parallel sponges.</li></ul><p>For example, to compute the SHA3-256 hashes of &quot;message #1&quot;,  &quot;message #2&quot;,  &quot;message #3&quot;, and  &quot;message #4&quot;, we can do:</p><pre><code class="language-julia-repl hljs">julia&gt; sponge = sha3_256_sponge(Val(4));

julia&gt; sponge = absorb(sponge, &quot;message #&quot;); # simultaneously absorb common prefix

julia&gt; sponge = absorb(sponge, &quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;); # now with different data

julia&gt; sponge = pad(sponge);

julia&gt; squeeze(sponge, Val(32))[2]
((0x8f, 0xf2, 0xcb, 0xa6, 0x2c, 0x19, 0x93, 0x77, 0x2a, 0x18, 0x8f, 0x8e, 0xf3, 0xa6, 0x13, 0x99, 0x15, 0x06, 0xc1, 0x48, 0x50, 0x3a, 0xd6, 0xdd, 0xbd, 0x15, 0x79, 0x09, 0x87, 0xe3, 0x61, 0x71), (0xe1, 0x44, 0x88, 0x35, 0xd8, 0x78, 0x65, 0x25, 0xa1, 0xbf, 0x5f, 0x2a, 0xfe, 0xec, 0x3b, 0x5a, 0x77, 0x4f, 0xb9, 0xa2, 0xe1, 0x91, 0x54, 0x5d, 0x1c, 0x06, 0x31, 0x94, 0x57, 0x07, 0x9c, 0x90), (0xce, 0xf9, 0x40, 0x8d, 0x2c, 0x57, 0x41, 0x91, 0x8b, 0x40, 0xc2, 0xab, 0x32, 0x42, 0xf1, 0xb5, 0xe7, 0xb2, 0x21, 0x9f, 0xbf, 0x3a, 0x3c, 0xc8, 0xe3, 0x6d, 0x0c, 0x66, 0x32, 0x00, 0x84, 0xa2), (0xf5, 0x59, 0x99, 0xcd, 0xef, 0x1a, 0x96, 0x5c, 0x80, 0x96, 0x0b, 0xe5, 0xda, 0x0b, 0xb9, 0x99, 0xa4, 0x15, 0xcb, 0x36, 0x5a, 0x8b, 0x30, 0x97, 0xfc, 0x3c, 0x5b, 0xa5, 0x59, 0xcc, 0xa0, 0xd6))

julia&gt; sha3_256(&quot;message #1&quot;), sha3_256(&quot;message #2&quot;), sha3_256(&quot;message #3&quot;), sha3_256(&quot;message #4&quot;) # same result
((0x8f, 0xf2, 0xcb, 0xa6, 0x2c, 0x19, 0x93, 0x77, 0x2a, 0x18, 0x8f, 0x8e, 0xf3, 0xa6, 0x13, 0x99, 0x15, 0x06, 0xc1, 0x48, 0x50, 0x3a, 0xd6, 0xdd, 0xbd, 0x15, 0x79, 0x09, 0x87, 0xe3, 0x61, 0x71), (0xe1, 0x44, 0x88, 0x35, 0xd8, 0x78, 0x65, 0x25, 0xa1, 0xbf, 0x5f, 0x2a, 0xfe, 0xec, 0x3b, 0x5a, 0x77, 0x4f, 0xb9, 0xa2, 0xe1, 0x91, 0x54, 0x5d, 0x1c, 0x06, 0x31, 0x94, 0x57, 0x07, 0x9c, 0x90), (0xce, 0xf9, 0x40, 0x8d, 0x2c, 0x57, 0x41, 0x91, 0x8b, 0x40, 0xc2, 0xab, 0x32, 0x42, 0xf1, 0xb5, 0xe7, 0xb2, 0x21, 0x9f, 0xbf, 0x3a, 0x3c, 0xc8, 0xe3, 0x6d, 0x0c, 0x66, 0x32, 0x00, 0x84, 0xa2), (0xf5, 0x59, 0x99, 0xcd, 0xef, 0x1a, 0x96, 0x5c, 0x80, 0x96, 0x0b, 0xe5, 0xda, 0x0b, 0xb9, 0x99, 0xa4, 0x15, 0xcb, 0x36, 0x5a, 0x8b, 0x30, 0x97, 0xfc, 0x3c, 0x5b, 0xa5, 0x59, 0xcc, 0xa0, 0xd6))</code></pre><p>For convenience, <a href="../reference/#Keccak.sha3_256"><code>sha3_256</code></a> accepts multiple arguments (of the same length) directly, so the above can be written as</p><pre><code class="language-julia-repl hljs">julia&gt; sha3_256(&quot;message #1&quot;, &quot;message #2&quot;, &quot;message #3&quot;, &quot;message #4&quot;)
((0x8f, 0xf2, 0xcb, 0xa6, 0x2c, 0x19, 0x93, 0x77, 0x2a, 0x18, 0x8f, 0x8e, 0xf3, 0xa6, 0x13, 0x99, 0x15, 0x06, 0xc1, 0x48, 0x50, 0x3a, 0xd6, 0xdd, 0xbd, 0x15, 0x79, 0x09, 0x87, 0xe3, 0x61, 0x71), (0xe1, 0x44, 0x88, 0x35, 0xd8, 0x78, 0x65, 0x25, 0xa1, 0xbf, 0x5f, 0x2a, 0xfe, 0xec, 0x3b, 0x5a, 0x77, 0x4f, 0xb9, 0xa2, 0xe1, 0x91, 0x54, 0x5d, 0x1c, 0x06, 0x31, 0x94, 0x57, 0x07, 0x9c, 0x90), (0xce, 0xf9, 0x40, 0x8d, 0x2c, 0x57, 0x41, 0x91, 0x8b, 0x40, 0xc2, 0xab, 0x32, 0x42, 0xf1, 0xb5, 0xe7, 0xb2, 0x21, 0x9f, 0xbf, 0x3a, 0x3c, 0xc8, 0xe3, 0x6d, 0x0c, 0x66, 0x32, 0x00, 0x84, 0xa2), (0xf5, 0x59, 0x99, 0xcd, 0xef, 0x1a, 0x96, 0x5c, 0x80, 0x96, 0x0b, 0xe5, 0xda, 0x0b, 0xb9, 0x99, 0xa4, 0x15, 0xcb, 0x36, 0x5a, 0x8b, 0x30, 0x97, 0xfc, 0x3c, 0x5b, 0xa5, 0x59, 0xcc, 0xa0, 0xd6))</code></pre><p>In the same fashion, <a href="../reference/#Keccak.shake_128"><code>shake_128</code></a> and <a href="../reference/#Keccak.shake_256"><code>shake_256</code></a> can also be applied to multiple data arguments.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../fips-202/">« SHA-3 (and SHAKE)</a><a class="docs-footer-nextpage" href="../sp800-185/">SHA-3 Derived Functions »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Friday 25 July 2025 08:29">Friday 25 July 2025</span>. Using Julia version 1.11.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
